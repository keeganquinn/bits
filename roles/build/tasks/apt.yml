---
- name: Install build packages
  become: yes
  apt:
    state: present
    name:
      - autoconf
      - bats
      - bison
      - build-essential
      - cpanminus
      - flex
      - gcc-multilib
      - graphviz
      - imagemagick-6.q16
      - libcrypt-ssleay-perl
      - libffi-dev
      - libgdbm-dev
      - libmagickwand-6.q16-dev
      - libncurses-dev
      - libnet-ssleay-perl
      - libpq-dev
      - libreadline6-dev
      - libsodium-dev
      - libssl-dev
      - libyaml-dev
      - nodejs
      - pbuilder
      - postgresql
      - python3-pip
      - redis-server
      - shellcheck
      - sloccount
      - tidy
      - zlib1g-dev

- name: Create root user in Postgres
  become: yes
  become_user: postgres
  postgresql_user:
    name: root
    role_attr_flags: CREATEDB,CREATEROLE,SUPERUSER

- name: Create keegan user in Postgres
  become: yes
  become_user: postgres
  postgresql_user:
    name: keegan
    role_attr_flags: CREATEDB,CREATEROLE,SUPERUSER
