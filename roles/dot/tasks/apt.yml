---
- name: Install desktop packages
  become: yes
  apt:
    state: present
    name:
      - barrier
      - blender
      - ffmpeg
      - ffplay
      - flac
      - fontforge
      - gimp
      - handbrake-gtk
      - inkscape
      - irssi
      - keepassxc
      - libreoffice
      - minicom
      - mp4v2-utils
      - mumble
      - nethack-console
      - obs-studio
      - openbox
      - powermgmt-base
      - rdesktop
      - sakura
      - scribus
      - smbclient
      - task-cinnamon-desktop
      - tigervnc-viewer
      - tint2
      - transmission
      - vlc
      - wireshark

- name: Install nextcloud-desktop from backports
  become: yes
  apt:
    state: present
    name: nextcloud-desktop
    default_release: buster-backports

- name: Create openbox configuration directory
  file:
    path: '{{ ansible_env.HOME }}/.config/openbox'
    state: directory

- name: Copy the openbox autostart script
  copy:
    src: autostart.sh
    dest: '{{ ansible_env.HOME }}/.config/openbox/autostart.sh'

- name: Copy the grub default file
  become: yes
  copy: src=grub dest=/etc/default/grub
  notify: update grub

- name: Copy the kernel-img.conf file
  become: yes
  copy: src=kernel-img.conf dest=/etc/kernel-img.conf
  notify: update grub
